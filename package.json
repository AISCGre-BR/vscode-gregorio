{
  "name": "vscode-gregorio",
  "displayName": "Gregorio Language Support",
  "description": "Language support for GABC/NABC notation with LSP integration and syntax highlighting",
  "version": "0.1.0",
  "publisher": "AISCGre-BR",
  "repository": {
    "type": "git",
    "url": "https://github.com/AISCGre-BR/vscode-gregorio"
  },
  "engines": {
    "vscode": "^1.107.0"
  },
  "categories": [
    "Programming Languages"
  ],
  "keywords": [
    "gabc",
    "nabc",
    "gregorio",
    "chant",
    "gregorian",
    "notation",
    "music"
  ],
  "activationEvents": [
    "onLanguage:gabc",
    "onCommand:gregorio.restartServer",
    "onCommand:gregorio.toggleLinting",
    "onCommand:gregorio.toggleSemanticHighlighting",
    "onStartupFinished"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "languages": [
      {
        "id": "gabc",
        "aliases": [
          "GABC",
          "gabc",
          "Gregorio"
        ],
        "extensions": [
          ".gabc"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "gabc",
        "scopeName": "source.gabc",
        "path": "./syntaxes/gabc.tmLanguage.json"
      },
      {
        "scopeName": "latex.injection",
        "path": "./syntaxes/latex-injection.json",
        "injectTo": ["source.gabc"]
      }
    ],
    "commands": [
      {
        "command": "gregorio.restartServer",
        "title": "Restart Gregorio Language Server",
        "category": "Gregorio"
      },
      {
        "command": "gregorio.toggleLinting",
        "title": "Toggle Linting",
        "category": "Gregorio"
      },
      {
        "command": "gregorio.toggleSemanticHighlighting",
        "title": "Toggle Semantic Highlighting",
        "category": "Gregorio"
      }
    ],
    "semanticTokenTypes": [
      {
        "id": "NABCSignificantLetterPrefix",
        "superType": "keyword",
        "description": "NABC significant letter prefix (ls)"
      },
      {
        "id": "NABCTironianLetterPrefix",
        "superType": "NABCSignificantLetterPrefix",
        "description": "NABC tironian letter prefix (lt)"
      },
      {
        "id": "NABCSignificantLetterShorthand",
        "superType": "function",
        "description": "NABC significant/tironian letter specifier"
      },
      {
        "id": "NABCSignificantLetterPosition",
        "superType": "number",
        "description": "NABC significant/tironian letter position"
      },
      {
        "id": "NABCSubpunctisPrefix",
        "superType": "class",
        "description": "NABC subpunctis prefix (su)"
      },
      {
        "id": "NABCPrepunctisPrefix",
        "superType": "NABCSubpunctisPrefix",
        "description": "NABC prepunctis prefix (pp)"
      },
      {
        "id": "NABCSubpunctisModifier",
        "superType": "parameter",
        "description": "NABC subpunctis/prepunctis modifier (t/n/etc.)"
      },
      {
        "id": "NABCSubpunctisRepetitionCount",
        "superType": "number",
        "description": "NABC subpunctis/prepunctis repetition count"
      },
      {
        "id": "NABCPitchDescriptorPrefix",
        "superType": "function",
        "description": "NABC pitch descriptor prefix (h)"
      },
      {
        "id": "NABCPitchDescriptorValue",
        "superType": "parameter",
        "description": "NABC pitch descriptor value (a-n, p)"
      },
      {
        "id": "NABCBasicGlyphDescriptor",
        "superType": "keyword",
        "description": "NABC basic glyph descriptor (pe, vi, to, qi, ql, etc.)"
      },
      {
        "id": "NABCGlyphModifier",
        "superType": "type",
        "description": "NABC glyph modifier (S, G, M, -, >, ~) with optional variant digit"
      },
      {
        "id": "GABCPunctum",
        "superType": "type",
        "description": "GABC punctum quadratum (basic pitch a-n, p)"
      },
      {
        "id": "GABCPunctumInclinatum",
        "superType": "GABCPunctum",
        "description": "GABC punctum inclinatum (uppercase pitch A-N, P)"
      }
    ],
    "semanticTokenScopes": [
      {
        "scopes": {
          "header": ["entity.name.section.gabc"],
          "property": ["entity.other.attribute-name.gabc"],
          "keyword": ["keyword.control.gabc"],
          "string": ["string.quoted.gabc"],
          "comment": ["comment.line.gabc", "comment.block.gabc"],
          "number": ["constant.numeric.gabc"],
          "operator": ["keyword.operator.gabc", "punctuation.separator.gabc"],
          "parameter": ["variable.parameter.gabc", "variable.other.constant.gabc"],
          "variable": ["variable.other.gabc", "entity.name.note.gabc"],
          "class": ["variable.language.gabc"],
          "namespace": ["entity.name.namespace.gabc", "storage.type.nabc.significant.gabc"],
          "type": ["storage.type.gabc", "entity.name.type.gabc", "support.type.gabc", "keyword.other.unit.gabc"],
          "decorator": ["entity.name.class.gabc"],
          "macro": ["string.regexp.gabc"],
          "regexp": ["constant.character.escape.gabc"],
          "label": ["entity.name.label.gabc", "storage.type.nabc.tironian.gabc"],
          "modifier": ["storage.modifier.gabc"],
          "function": ["entity.name.function.gabc"],
          "customLiteral": ["constant.other.gabc", "entity.name.tag.nabc.specifier.gabc"],
          "NABCSignificantLetterPrefix": ["storage.type.gabc"],
          "NABCTironianLetterPrefix": ["storage.type.gabc"],
          "NABCSignificantLetterShorthand": ["entity.name.function.gabc"],
          "NABCSignificantLetterPosition": ["constant.numeric.gabc"],
          "NABCSubpunctisPrefix": ["entity.name.class.gabc"],
          "NABCPrepunctisPrefix": ["entity.name.class.gabc"],
          "NABCSubpunctisModifier": ["variable.parameter.gabc"],
          "NABCSubpunctisRepetitionCount": ["constant.numeric.gabc"],
          "NABCPitchDescriptorPrefix": ["entity.name.function.gabc"],
          "NABCPitchDescriptorValue": ["variable.parameter.gabc"],
          "NABCBasicGlyphDescriptor": ["keyword.control.gabc"],
          "NABCGlyphModifier": ["support.type.gabc"]
        }
      }
    ],
    "configurationDefaults": {
      "editor.semanticTokenColorCustomizations": {
        "[Default Dark+]": {
          "rules": {
            "property:gabc": "#9CDCFE",
            "keyword:gabc": "#C586C0",
            "class:gabc": "#4EC9B0",
            "decorator:gabc": "#DCDCAA",
            "macro:gabc": "#569CD6",
            "parameter:gabc": "#9CDCFE",
            "variable:gabc": "#4FC1FF",
            "customLiteral:gabc": "#CE9178",
            "NABCSignificantLetterPrefix:gabc": "#C586C0",
            "NABCTironianLetterPrefix:gabc": "#C586C0",
            "NABCSignificantLetterShorthand:gabc": "#DCDCAA",
            "NABCSignificantLetterPosition:gabc": "#B5CEA8",
            "NABCSubpunctisPrefix:gabc": "#4EC9B0",
            "NABCPrepunctisPrefix:gabc": "#4EC9B0",
            "NABCSubpunctisModifier:gabc": "#9CDCFE",
            "NABCSubpunctisRepetitionCount:gabc": "#B5CEA8",
            "NABCPitchDescriptorPrefix:gabc": "#DCDCAA",
            "NABCPitchDescriptorValue:gabc": "#9CDCFE",
            "NABCBasicGlyphDescriptor:gabc": "#C586C0",
            "NABCGlyphModifier:gabc": "#D7BA7D"
          }
        },
        "[Default Light+]": {
          "rules": {
            "property:gabc": "#0070C1",
            "keyword:gabc": "#AF00DB",
            "class:gabc": "#267F99",
            "decorator:gabc": "#795E26",
            "macro:gabc": "#0000FF",
            "parameter:gabc": "#001080",
            "variable:gabc": "#0070C1",
            "customLiteral:gabc": "#A31515",
            "NABCSignificantLetterPrefix:gabc": "#AF00DB",
            "NABCTironianLetterPrefix:gabc": "#AF00DB",
            "NABCSignificantLetterShorthand:gabc": "#795E26",
            "NABCSignificantLetterPosition:gabc": "#098658",
            "NABCSubpunctisPrefix:gabc": "#267F99",
            "NABCPrepunctisPrefix:gabc": "#267F99",
            "NABCSubpunctisModifier:gabc": "#001080",
            "NABCSubpunctisRepetitionCount:gabc": "#098658",
            "NABCPitchDescriptorPrefix:gabc": "#795E26",
            "NABCPitchDescriptorValue:gabc": "#001080",
            "NABCBasicGlyphDescriptor:gabc": "#AF00DB",
            "NABCGlyphModifier:gabc": "#811F3F"
          }
        }
      }
    },
    "configuration": {
      "title": "Gregorio",
      "properties": {
        "gregorio.lsp.serverPath": {
          "type": "string",
          "default": "",
          "description": "Path to a custom gregorio-lsp server.js file. If empty, the bundled LSP server will be used."
        },
        "gregorio.lsp.trace.server": {
          "type": "string",
          "enum": [
            "off",
            "messages",
            "verbose"
          ],
          "default": "off",
          "description": "Traces the communication between VS Code and the language server."
        },
        "gregorio.linting.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable linting for GABC files. When enabled, the language server will report syntax errors and warnings."
        },
        "gregorio.linting.severity": {
          "type": "string",
          "enum": [
            "error",
            "warning",
            "info"
          ],
          "default": "warning",
          "description": "Minimum severity level to report. Choose 'error' to show only errors, 'warning' for errors and warnings, or 'info' for all diagnostic messages."
        },
        "gregorio.linting.onSave": {
          "type": "boolean",
          "default": false,
          "description": "Only run linting when the file is saved. When disabled, linting runs as you type."
        },
        "gregorio.linting.ignoreRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "List of linting rule codes to ignore (e.g., ['missing-clef', 'invalid-note'])."
        },
        "gregorio.highlighting.semantic": {
          "type": "boolean",
          "default": true,
          "description": "Enable semantic syntax highlighting using the GABC parser. Provides more accurate highlighting based on document structure."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && npm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && npm run lint && node esbuild.js --production",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@types/vscode": "^1.107.0",
    "@vscode/test-cli": "^0.0.12",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.27.1",
    "eslint": "^9.39.1",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.1"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1",
    "vscode-languageserver": "^9.0.1",
    "vscode-languageserver-textdocument": "^1.0.11"
  }
}
